<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Synced Notes</title>
    <style>
        /* Previous CSS remains unchanged */
    </style>
</head>
<body>
    <h1>Cross-Device Notes</h1>
    
    <form id="noteForm">
        <textarea id="noteContent" placeholder="Start typing..."></textarea>
        <button type="submit">Save Note</button>
        <button type="button" onclick="syncNotes()">Manual Sync</button>
    </form>

    <div id="notesList" class="container"></div>

    <script>
        const STORAGE_KEY = 'synced-notes';
        let notes = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');

        // Automatic sync every 5 minutes
        setInterval(syncNotes, 300000);

        function syncNotes() {
            if (typeof Firefox === 'undefined') return;
            
            // Use bookmark sync as fallback
            const bookmark = {
                title: 'Notes Backup',
                url: location.href + '#backup=' + encodeURIComponent(JSON.stringify(notes))
            };
            
            browser.bookmarks.search({title: 'Notes Backup'}).then(results => {
                if (results.length > 0) {
                    const remoteNotes = decodeURIComponent(results[0].url.split('#backup=')[1]);
                    notes = mergeNotes(notes, JSON.parse(remoteNotes));
                }
                return browser.bookmarks.create(bookmark);
            }).catch(() => {
                console.log('Firefox bookmark sync unavailable');
            }).finally(() => {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(notes));
                renderNotes();
            });
        }

        function mergeNotes(local, remote) {
            // Merge logic remains similar to previous implementation
            return [...local, ...remote.filter(r => 
                !local.some(l => l.id === r.id)
            )];
        }

        // CRUD operations remain unchanged from previous implementation
        // Render functions remain unchanged
    </script>
</body>
</html>
